<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Kalaha Board Game</title>
</head>
<style>
.Content{
    text-align: center;
    max-width: 800px;
    vertical-align: middle;
    margin: auto;
}
.TopUI{
    display:grid;
    grid-template-columns: 1fr 2fr 1fr;
    margin: 20px;
}
.Normal-Pits{
    display:grid;
    grid-template-columns: repeat(6, 1fr);
    grid-gap: 3px;
}
.Board{
    display:grid;
    grid-template-columns: 1fr 6fr 1fr;
    grid-gap: 3px;
    padding: 10px;
    border: 20px solid #ffff;
    border-radius: 35px;
}

.GameContainer {
    background-color: #2196F3;
    padding:20px;
    font-size: 30px;
    border-radius: 50px;
}
.Pit {
    background-color: rgba(255,255,255,0.7);
    padding: 20px;
    margin:0;
    border: 3px solid #ffff;
    border-radius: 5px;
    display: flex;
    justify-content: center;
    align-items: center;
}
.Valid{
    border: 3px solid #ffff;
    animation: border-pulsate 2s infinite;
}
@keyframes border-pulsate {
    0%   { border-color: rgba(255, 255, 255, 1); }
    50%  { border-color: rgba(0, 0, 0, 1); }
    100% { border-color: rgba(255, 255, 255, 1); }
}
.Valid:Hover{
    background-color: rgba(255,255,255,0.9);
}
.Active{
    border: 3px solid #ffff;
    border-radius:20px;
    animation: border-pulsate 2s infinite;
}
.Player{
    border: 3px solid #ffff;
    border-radius:20px;
}
.Flex{
    display:flex;
}
.Rules{
    Font-size: 20px;
}
</style>

<body class="Content">
    <div class="Info">
        <H1>Kalaha Board Game</H1>
    </div>
    <div class="GameContainer">
        <div class="TopUI">
            <div class="UI-Element Player P1 Active">P1 Score: 0</div>
            <div class="UI-Element ">Turn: 10</div>
            <div class="UI-Element Player P2">P2 Score: 0</div>
        </div>
        <div class="Board">
            <div class="Kalaha-left Pit">0</div>
            <div class="Normal-Pits">
                <div class="Pit P1 Valid">6</div>
                <div class="Pit P1 Valid">6</div>
                <div class="Pit P1 Valid">6</div>
                <div class="Pit P1 Valid">6</div>
                <div class="Pit P1 Valid">6</div>
                <div class="Pit P1 Valid">6</div>
                <div class="Pit P2">6</div>
                <div class="Pit P2">6</div>
                <div class="Pit P2">6</div>
                <div class="Pit P2">6</div>
                <div class="Pit P2">6</div>
                <div class="Pit P2">6</div>
            </div>
            <div class="Kalaha-right Pit">0</div>
        </div>
        <div class="Rules">
            <p>Rules explained here: <br/>
                Blabla<br/>
                BlablaS<br/>
            </p>
        </div>
    </div>
</body>

<script type="text/javascript" language="JavaScript">
    GetGame();

    var pits = document.getElementsByClassName("Pit");
    
    //Array.prototype.forEach.call(pits,)
    for(var i = 0; i < pits.length; i++){
        console.log(pits[i])
        console.log(i);
        pits[i].value = i;
        pits[i].onclick = function(){
            console.log(this.value);
        }
    }

    function GetGame(){
        console.log("GetGame");
        var result;
        fetch('/game')
        .then(response => response.json())
        .then(data =>{
            result = data;
            console.log(data);
        }).catch(error => console.log(error))
    }

    function PostGame(Index, Player){
        console.log("PostGame");
        var result;
        postRequest('/game',{
            "SelectedBucket": Index,
            "PlayerID": Player,
            "ClientHash": 0
        }).then(data => console.log(data))
        .catch(error => console.log(error));
    }

    function postRequest(url, data){
        return fetch(url, {
            credential: 'same-origin',
            method: 'POST',
            body: JSON.stringify(data),
            headers: new Headers({
                'Content-Type':'application/json'
            }),
        }).then(response => response.json())
    }

</script>

</html>